import { NextRequest, NextResponse } from "next/server";

interface YandexDateTime {
	year?: number;
	month?: number;
	day?: number;
	is_relative?: boolean;
	datetime?: string;
	datetime_to?: string;
}

interface Event {
	id: number;
	title: string;
	start_date: string;
	end_date: string;
	coordinate_one?: number;
	coordinate_two?: number;
	direction: string;
	executor: string;
	participants_count: number;
	interests?: number[];
}

const data: Event[] = [
	{
		id: 1,
		title: "Спортивная студенческая ночь",
		start_date: "2025-01-25",
		end_date: "2025-01-25",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "Министерство физической культуры и спорта ПК",
		participants_count: 600,
		interests: [9],
	},
	{
		id: 2,
		title: "Старт межрегиональной патриотической акции «Десант Прикамья»",
		start_date: "2025-01-31",
		end_date: "2025-01-31",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Добровольчество",
		executor: "РСО",
		participants_count: 800,
		interests: [2],
	},
	{
		id: 3,
		title: "Открытие молодежного штаба",
		start_date: "2025-02-03",
		end_date: "2025-02-03",
		coordinate_one: 58.011532,
		coordinate_two: 56.234393,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 50,
		interests: [2],
	},
	{
		id: 4,
		title: 'Всероссийская массовая лыжная гонка "Лыжня России"',
		start_date: "2025-02-08",
		end_date: "2025-02-08",
		coordinate_one: 58.037795,
		coordinate_two: 56.415228,
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "Министерство физической культуры и спорта ПК",
		participants_count: 5500,
		interests: [9, 4],
	},
	{
		id: 5,
		title: "Карьерный форум РСО «ТрудКрут»",
		start_date: "2025-02-14",
		end_date: "2025-02-17",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "Агентство по делам молодежи/ РСО",
		participants_count: 1000,
		interests: [2, 4],
	},
	{
		id: 6,
		title: "Карьерный форум РСО «ТрудКрут»",
		start_date: "2025-02-14",
		end_date: "2025-02-17",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "Агентство по делам молодежи/ РСО",
		participants_count: 1000,
		interests: [2, 4],
	},
	{
		id: 7,
		title: "Открытый молодежный чемпионат тематических настольных игр «Профессия-Защищать»",
		start_date: "2025-02-23",
		end_date: "2025-02-23",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Администрация города Перми",
		participants_count: 500,
		interests: [3],
	},
	{
		id: 8,
		title: "Стрит-арт полигон «Динамика»",
		start_date: "2025-02-28",
		end_date: "2025-02-28",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 150,
		interests: [3, 7, 13],
	},
	{
		id: 9,
		title: "Студенческая масленица",
		start_date: "2025-03-02",
		end_date: "2025-03-02",
		coordinate_one: 58.011141,
		coordinate_two: 56.172041,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Пермский педагогический университет",
		participants_count: 5000,
		interests: [3],
	},
	{
		id: 10,
		title: "Студенческая масленица",
		start_date: "2025-03-02",
		end_date: "2025-03-02",
		coordinate_one: 58.008407,
		coordinate_two: 56.187966,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Пермский педагогический университет",
		participants_count: 5000,
		interests: [3, 10],
	},
	{
		id: 11,
		title: "Студенческая масленица",
		start_date: "2025-03-02",
		end_date: "2025-03-02",
		coordinate_one: 58.00851,
		coordinate_two: 56.251659,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Пермский педагогический университет",
		participants_count: 5000,
		interests: [3],
	},
	{
		id: 12,
		title: "Студенческая масленица",
		start_date: "2025-03-02",
		end_date: "2025-03-02",
		coordinate_one: 58.008295,
		coordinate_two: 56.24025,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Пермский педагогический университет",
		participants_count: 5000,
		interests: [3],
	},
	{
		id: 13,
		title: "Интеллектуальная Олимпиада ПФО среди школьников",
		start_date: "2025-03-12",
		end_date: "2025-03-14",
		direction: "Выявление и поддержка талантов",
		executor: "Министерство образования и науки ПК",
		participants_count: 500,
		interests: [2, 8],
	},
	{
		id: 14,
		title: "Робототехнический танковый биатлон",
		start_date: "2025-03-15",
		end_date: "2025-03-15",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Министерство образования и науки ПК",
		participants_count: 500,
		interests: [4, 8, 5],
	},
	{
		id: 15,
		title: 'Форум "Молодой специалист - строитель будущего"',
		start_date: "2025-03-18",
		end_date: "2025-03-18",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Выявление и поддержка талантов",
		executor: "Минстрой ПК",
		participants_count: 600,
		interests: [3, 12],
	},
	{
		id: 16,
		title: "Кубок КВН Движения Первых",
		start_date: "2025-03-28",
		end_date: "2025-03-28",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 500,
		interests: [2, 4, 8],
	},
	{
		id: 17,
		title: "X Форум молодых педагогов Пермского края",
		start_date: "2025-03-28",
		end_date: "2025-03-29",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "Министерство образования и науки ПК",
		participants_count: 300,
		interests: [2, 8],
	},
	{
		id: 18,
		title: 'Церемония награждения первого краевого фестиваля "Школьная весна"',
		start_date: "2025-03-31",
		end_date: "2025-03-31",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 500,
		interests: [2, 8],
	},
	{
		id: 19,
		title: "Кубок ректоров КВН",
		start_date: "2025-04-01",
		end_date: "2025-04-01",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 500,
		interests: [3, 6, 12],
	},
	{
		id: 20,
		title: "Слет студенческих отрядов Союзного государства",
		start_date: "2025-04-05",
		end_date: "2025-04-08",
		direction: "Международное сотрудничество",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 300,
		interests: [2, 3, 8],
	},
	{
		id: 21,
		title: "Финал Универсиады ВУЗов и СПО Пермского края по игровым видам спорта",
		start_date: "2025-04-06",
		end_date: "2025-04-06",
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "Министерство физической культуры и спорта ПК",
		participants_count: 500,
		interests: [9],
	},
	{
		id: 22,
		title: "Финал Универсиады ВУЗов и СПО Пермского края по игровым видам спорта",
		start_date: "2025-05-01",
		end_date: "2025-05-01",
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "Министерство физической культуры и спорта ПК",
		participants_count: 500,
		interests: [9],
	},
	{
		id: 23,
		title: "1/8 - Первая лига КВН",
		start_date: "2025-04-14",
		end_date: "2025-04-16",
		coordinate_one: 57.990846,
		coordinate_two: 56.250318,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 8000,
		interests: [4, 3, 6, 12, 5],
	},
	{
		id: 24,
		title: "Всероссийская ярмарка трудоустройства",
		start_date: "2025-04-18",
		end_date: "2025-04-18",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "Министерство труда и социального развития ПК",
		participants_count: 10000,
		interests: [2, 3, 6, 12, 8, 5],
	},
	{
		id: 25,
		title: "Гала-концерты студенческой весны ПГМУ, ПГИК, ПГАТУ, ПГГПУ",
		start_date: "2025-04-20",
		end_date: "2025-04-23",
		coordinate_one: 57.990846,
		coordinate_two: 56.250318,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи Пермского края",
		participants_count: 3000,
		interests: [2, 4, 3, 6, 12, 8, 5],
	},
	{
		id: 26,
		title: "Дни доброго кино (заявка на рекорд России по самому массовому кинопоказу)",
		start_date: "2025-04-21",
		end_date: "2025-04-26",
		coordinate_one: 58.020747,
		coordinate_two: 56.282201,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Агентство по делам молодежи Пермского края",
		participants_count: 500000,
		interests: [4, 3, 6, 11, 12, 8, 7, 5, 13],
	},
	{
		id: 27,
		title: "Стратегическая сессия для студентов ВУЗОв России, участвующих в создании межвузовских кампусов",
		start_date: "2025-04-23",
		end_date: "2025-04-25",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "защита прав и законных интересов молодёжи",
		executor: 'АНО «Дирекция межвузовского кампуса Пермского края"',
		participants_count: 500,
		interests: [4, 3, 6, 12, 8, 5],
	},
	{
		id: 28,
		title: "Гала-концерт студенческой весны ПНИПУ",
		start_date: "2025-04-24",
		end_date: "2025-04-24",
		coordinate_one: 57.990846,
		coordinate_two: 56.250318,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи Пермского края",
		participants_count: 1000,
		interests: [4, 3, 6, 12, 8, 5],
	},
	{
		id: 29,
		title: "Гала-концерт студенческой весны ПГИУ",
		start_date: "2025-04-25",
		end_date: "2025-04-25",
		coordinate_one: 57.990846,
		coordinate_two: 56.250318,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи Пермского края",
		participants_count: 1000,
		interests: [4, 3, 6, 12, 8, 5],
	},
	{
		id: 30,
		title: "Правовой марафон",
		start_date: "2025-04-27",
		end_date: "2025-09-01",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "защита прав и законных интересов молодёжи",
		executor: "Уполномоченный по правам человека ПК",
		participants_count: 1000,
		interests: [4, 3, 6, 12, 8, 5],
	},
	{
		id: 31,
		title: "Правовой марафон",
		start_date: "2025-04-27",
		end_date: "2025-09-01",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "защита прав и законных интересов молодёжи",
		executor: "Уполномоченный по правам человека ПК",
		participants_count: 1000,
		interests: [2, 4, 3, 6, 12, 8, 5],
	},
	{
		id: 32,
		title: "Марафон общества Знания",
		start_date: "2025-04-28",
		end_date: "2025-04-28",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 500,
		interests: [2, 4, 3, 6, 12, 8, 5],
	},
	{
		id: 33,
		title: 'Фестиваль иностранных студентов "Открой мир"',
		start_date: "2025-04-28",
		end_date: "2025-04-29",
		coordinate_one: 58.008295,
		coordinate_two: 56.24025,
		direction: "Международное сотрудничество",
		executor: "Пермский политехнический универистет",
		participants_count: 600,
		interests: [2, 4, 3, 6, 12, 8, 5],
	},
	{
		id: 34,
		title: 'Церемония награждения краевого фестиваля "Студенческая весна" среди ВУЗов и СПО',
		start_date: "2025-04-29",
		end_date: "2025-04-30",
		coordinate_one: 57.990846,
		coordinate_two: 56.250318,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи Пермского края",
		participants_count: 1000,
		interests: [2, 4, 3, 6, 12, 8, 5],
	},
	{
		id: 35,
		title: "Слёт-фестиваль Советов Первых",
		start_date: "2025-04-29",
		end_date: "2025-04-29",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Поддержка молодежных объединений и органов молодежного самоуправления",
		executor: "Движение Первых",
		participants_count: 250,
		interests: [9, 4, 3, 6, 12, 8, 5],
	},
	{
		id: 36,
		title: "Слёт-фестиваль Советов Первых",
		start_date: "2025-04-29",
		end_date: "2025-04-29",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Поддержка молодежных объединений и органов молодежного самоуправления",
		executor: "Движение Первых",
		participants_count: 250,
		interests: [4, 3, 6, 11, 12, 8, 7, 5, 13],
	},
	{
		id: 37,
		title: 'Всероссийская трудовая акция "Труд крут!"',
		start_date: "2025-05-01",
		end_date: "2025-05-01",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Институт наставничества",
		executor: "РСО",
		participants_count: 200,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 38,
		title: "Творческий фестиваль работающей молодежи «ТрудВесна»",
		start_date: "2025-05-02",
		end_date: "2025-05-02",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Выявление и поддержка талантов",
		executor: "Администрация города Перми",
		participants_count: 200,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 39,
		title: "День Победы по отдельному плану",
		start_date: "2025-05-09",
		end_date: "2025-05-09",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Администрация города Перми",
		participants_count: 10000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 40,
		title: "Спартакиада РСО",
		start_date: "2025-05-12",
		end_date: "2025-05-16",
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 500,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 41,
		title: "Суперфиналы турнира Приволжского федерального округа по баскетболу 3х3 среди школ и колледжей ПФО",
		start_date: "2025-05-15",
		end_date: "2025-05-18",
		coordinate_one: 57.974866,
		coordinate_two: 56.159644,
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "Министерство физической культуры и спорта ПК",
		participants_count: 1000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 42,
		title: 'Межрегиональный слет студенческих отрядов "СОбирай Прикамье"',
		start_date: "2025-05-16",
		end_date: "2025-05-18",
		coordinate_one: 57.977336,
		coordinate_two: 55.791658,
		direction: "Поддержка молодежных объединений и органов молодежного самоуправления",
		executor: "РСО",
		participants_count: 700,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 43,
		title: "Международный молодежный фестиваль семейных традиций",
		start_date: "2025-05-17",
		end_date: "2025-05-17",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Международное сотрудничество",
		executor: "Администрация города Перми",
		participants_count: 1500,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 44,
		title: "Маршруты Перми",
		start_date: "2025-05-18",
		end_date: "2025-09-14",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Досуг, оздоровление, вовлечение молодежи в социальный туризм",
		executor: "Министерство культуры ПК",
		participants_count: 10000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 45,
		title: "Форум «Дни Пермского бизнеса»",
		start_date: "2025-05-22",
		end_date: "2025-05-23",
		coordinate_one: 57.993359,
		coordinate_two: 56.216659,
		direction: "Молодежное предпринимательство",
		executor: "Агентство по развитию малого и среднего предпринимательства ПК",
		participants_count: 5000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 46,
		title: "Гос.Старт Диалог с губернатором ПК",
		start_date: "2025-05-25",
		end_date: "2025-05-25",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 100,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 47,
		title: "Фестиваль кино «Медвежонок»",
		start_date: "2025-05-30",
		end_date: "2025-06-01",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Создание и распространение произведений",
		executor: "Министерство культуры ПК",
		participants_count: 50000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 48,
		title: "Фестиваль детства и юности с Движением Первых",
		start_date: "2025-06-01",
		end_date: "2025-06-01",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Поддержка молодежных объединений и органов молодежного самоуправления",
		executor: "Администрация города Перми, Движение Первых",
		participants_count: 5000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 49,
		title: 'III всероссийская конференция "Инициативное бюджетирование и территориальное общественное самоуправление"',
		start_date: "2025-06-04",
		end_date: "2025-06-05",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Поддержка инициатив молодежи",
		executor: "Министерство территориального развития ПК",
		participants_count: 1000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 50,
		title: "Образовательный форум в сфере патриотического воспитания Пермского края",
		start_date: "2025-06-11",
		end_date: "2025-06-12",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Министерство образования и науки ПК",
		participants_count: 500,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 51,
		title: "Фестиваль «Все стили в силе»",
		start_date: "2025-06-11",
		end_date: "2025-06-12",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Выявление и поддержка талантов",
		executor: "Администрация города Перми",
		participants_count: 1000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 52,
		title: "Блогеры России",
		start_date: "2025-06-12",
		end_date: "2025-06-12",
		coordinate_one: 58.008316,
		coordinate_two: 56.218182,
		direction: "Досуг, оздоровление, отдых вовлечение молодежи в социальный туризм",
		executor: "Администрация города Перми",
		participants_count: 35000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 53,
		title: "Финал Всероссийского конкурса молодых ремесленников и дизайнеров",
		start_date: "2025-06-12",
		end_date: "2025-06-13",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Выявление и поддержка талантов",
		executor: "Российский союз сельской молодежи",
		participants_count: 500,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 54,
		title: "Краевой бал выпускников",
		start_date: "2025-06-27",
		end_date: "2025-06-27",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Выявление и поддержка талантов",
		executor: "Министерство образования и науки ПК",
		participants_count: 5000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 55,
		title: "1/4 - Первая лига КВН",
		start_date: "2025-06-26",
		end_date: "2025-06-28",
		coordinate_one: 57.990846,
		coordinate_two: 56.250318,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 8000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 56,
		title: "Открытие первой молодежной библиотеки",
		start_date: "2025-06-28",
		end_date: "2025-06-28",
		direction: "Новые знания",
		executor: "Администрация города Перми",
		participants_count: 100,
		interests: [9, 4, 3, 6, 11, 12, 10, 8, 7, 5, 13],
	},
	{
		id: 57,
		title: "День молодежи в Перми",
		start_date: "2025-06-28",
		end_date: "2025-06-28",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Досуг, оздоровление, отдых вовлечение молодежи в социальный туризм",
		executor: "Агентство по делам молодежи ПК, администрация города Перми",
		participants_count: 25000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 58,
		title: "Фестиваль «Город встреч»",
		start_date: "2025-06-01",
		end_date: "2025-08-01",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Досуг, оздоровление, отдых, вовлечение молодежи в социальный туризм",
		executor: "Министерство культуры ПК",
		participants_count: 10000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 59,
		title: "Фестиваль «ЭкоФест»",
		start_date: "2025-06-01",
		end_date: "2025-07-01",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Экология",
		executor: "Администрация города Перми",
		participants_count: 300,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 60,
		title: "Фестиваль «ЭкоФест»",
		start_date: "2025-06-01",
		end_date: "2025-07-01",
		coordinate_one: 57.994407,
		coordinate_two: 56.269885,
		direction: "Экология",
		executor: "Администрация города Перми",
		participants_count: 300,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 61,
		title: "Тематическая выставка «Трудовые права через историю»",
		start_date: "2025-06-01",
		end_date: "2025-09-01",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Правовое просвещение",
		executor: "Уполномоченный по правам человека ПК",
		participants_count: 1000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 62,
		title: "Тематическая выставка «Трудовые права через историю»",
		start_date: "2025-06-01",
		end_date: "2025-09-01",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Правовое просвещение",
		executor: "Уполномоченный по правам человека ПК",
		participants_count: 1000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 63,
		title: "Бал выпускников детских домов Прикамья",
		start_date: "2025-06-01",
		end_date: "2025-06-01",
		coordinate_one: 57.997822,
		coordinate_two: 55.952604,
		direction: "поддержка молодежи ТЖС",
		executor: "Министерство труда и социального развития ПК",
		participants_count: 100,
		interests: [9, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 64,
		title: "Форум для участников молодежного парламентского движения Пермского края",
		start_date: "2025-06-01",
		end_date: "2025-06-01",
		direction: "Правовое просвещение",
		executor: "Законодательное собрание Пермского края",
		participants_count: 200,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 65,
		title: "Международный «Лагерь Дружбы» (открытие школьного клуба дружбы)",
		start_date: "2025-07-01",
		end_date: "2025-07-10",
		coordinate_one: 57.981243,
		coordinate_two: 56.207789,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Администрация города Перми",
		participants_count: 200,
		interests: [9, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 66,
		title: "Окружной форум городов трудовой доблести",
		start_date: "2025-07-01",
		end_date: "2025-07-02",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Администрация города Перми",
		participants_count: 1000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 67,
		title: "Выездное заседание комитета по молодежной политике ГД РФ",
		start_date: "2025-07-02",
		end_date: "2025-07-03",
		direction: "защита прав и законных интересов молодёжи",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 7,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 68,
		title: "Всероссийский форум рабочей молодежи",
		start_date: "2025-07-02",
		end_date: "2025-07-05",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 300,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 69,
		title: "Всероссийский форум рабочей молодежи",
		start_date: "2025-07-02",
		end_date: "2025-07-05",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 300,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 70,
		title: "Фестиваль семейного творчества",
		start_date: "2025-07-08",
		end_date: "2025-07-08",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Поддержка молодых семей, семейные ценности",
		executor: "Администрация города Перми",
		participants_count: 5000,
		interests: [9, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 71,
		title: "XV Всероссийская открытая полевая олимпиада юных геологов",
		start_date: "2025-07-24",
		end_date: "2025-08-04",
		coordinate_one: 58.06647,
		coordinate_two: 56.357274,
		direction: "Выявление и поддержка талантов",
		executor: "Министерство природных ресурсов, лесного хозяйства и экологии ПК",
		participants_count: 600,
		interests: [9, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 72,
		title: "Международный трудовой проект «Сердце Пармы»",
		start_date: "2025-07-01",
		end_date: "2025-08-20",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 300,
		interests: [9, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 73,
		title: "Фестиваль водных видов спорта",
		start_date: "2025-06-14",
		end_date: "2025-06-14",
		coordinate_one: 57.86994,
		coordinate_two: 55.835516,
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "Администрация города Перми",
		participants_count: 5000,
		interests: [2, 4, 3, 6, 11, 12, 10, 8, 7, 5, 13],
	},
	{
		id: 74,
		title: "Фестиваль НКО «Добрый пикник»",
		start_date: "2025-07-01",
		end_date: "2025-07-01",
		coordinate_one: 58.011141,
		coordinate_two: 56.172041,
		direction: "Добровольчество",
		executor: "Администрация города Перми",
		participants_count: 1000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 75,
		title: "Фестиваль уличного искусства «МонументАрт»",
		start_date: "2025-08-01",
		end_date: "2025-09-01",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Выявление и поддержка талантов",
		executor: "Администрация города Перми",
		participants_count: 100,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 76,
		title: "Всероссийский полуфинал «Большой перемены» для старшеклассников и студентов колледжей",
		start_date: "2025-08-01",
		end_date: "2025-08-15",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Выявление и поддержка талантов",
		executor: "Министерство образования и науки ПК",
		participants_count: 1500,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 77,
		title: "IV Фестиваль уличных театров «Флюгер» (молодежные театры)",
		start_date: "2025-08-09",
		end_date: "2025-08-10",
		coordinate_one: 58.008316,
		coordinate_two: 56.218182,
		direction: "Досуг, оздоровление, вовлечение молодежи в социальный туризм",
		executor: "Министерство культуры ПК",
		participants_count: 45000,
		interests: [9, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 78,
		title: 'Окружной слет рабочей молодежи "МолоТ"',
		start_date: "2025-08-06",
		end_date: "2025-08-10",
		coordinate_one: 58.003984,
		coordinate_two: 55.673701,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 500,
		interests: [9, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 79,
		title: 'Окружной слет рабочей молодежи "МолоТ"',
		start_date: "2025-08-06",
		end_date: "2025-08-10",
		coordinate_one: 57.974866,
		coordinate_two: 56.159644,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 500,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 80,
		title: 'Окружной слет рабочей молодежи "МолоТ"',
		start_date: "2025-08-06",
		end_date: "2025-08-10",
		coordinate_one: 57.995204,
		coordinate_two: 56.198892,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 500,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 81,
		title: "Летний кубок КВН",
		start_date: "2025-08-10",
		end_date: "2025-08-10",
		coordinate_one: 58.02406,
		coordinate_two: 56.296039,
		direction: "Выявление и поддержка талантов",
		executor: "Министерство культуры ПК",
		participants_count: 3500,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 82,
		title: 'Финал Молодежный фестиваль "Стрит баскет" по баскетболу 3х3',
		start_date: "2025-08-15",
		end_date: "2025-08-15",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Выявление и поддержка талантов",
		executor: "Министерство физической культуры и спорта ПК",
		participants_count: 150,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 83,
		title: "Забег «Темные ночи»",
		start_date: "2025-08-16",
		end_date: "2025-08-16",
		coordinate_one: 58.009291,
		coordinate_two: 56.223509,
		direction:
			"межнациональное (межэтнического) и межконфессиональное согласие, профилактика экстримизма",
		executor: "Министерство физической культуры и спорта ПК",
		participants_count: 1000,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 84,
		title: "Форум семейных сообществ «Родные-Любимые»",
		start_date: "2025-08-22",
		end_date: "2025-08-23",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Поддержка молодых семей, семейные ценности",
		executor: "Движение Первых",
		participants_count: 300,
		interests: [9, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 85,
		title: "Форум семейных сообществ «Родные-Любимые»",
		start_date: "2025-08-22",
		end_date: "2025-08-23",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Поддержка молодых семей, семейные ценности",
		executor: "Движение Первых",
		participants_count: 300,
		interests: [9, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 86,
		title: "Ночь города",
		start_date: "2025-08-24",
		end_date: "2025-08-24",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Досуг, оздоровление, вовлечение молодежи в социальный туризм",
		executor: "Минстерство культуры ПК",
		participants_count: 50000,
		interests: [9, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 87,
		title: "Финал VI летней Спартакиады молодежи (юниорская) России по киокушинкай",
		start_date: "2025-08-29",
		end_date: "2025-08-31",
		coordinate_one: 57.974866,
		coordinate_two: 56.159644,
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "Министерство физической культуры и спорта ПК",
		participants_count: 500,
		interests: [2, 4, 3, 6, 12, 10, 8, 5],
	},
	{
		id: 88,
		title: "Отборочный тур международного чемпионата «Битва роботов»",
		start_date: "2025-08-30",
		end_date: "2025-08-30",
		coordinate_one: 58.02406,
		coordinate_two: 56.296039,
		direction: "Выявление и поддержка талантов",
		executor: "Министерство информационного развития и связи ПК",
		participants_count: 5000,
	},
	{
		id: 89,
		title: "День наставника Движения Первых",
		start_date: "2025-08-01",
		end_date: "2025-08-01",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Институт наставничества",
		executor: "Движение Первых",
		participants_count: 200,
	},
	{
		id: 90,
		title: "День наставника Движения Первых",
		start_date: "2025-08-01",
		end_date: "2025-08-01",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Институт наставничества",
		executor: "Движение Первых",
		participants_count: 200,
	},
	{
		id: 91,
		title: "II Всероссийский слет трудовых отрядов подростков",
		start_date: "2025-09-05",
		end_date: "2025-09-07",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "Агентство по делам молодежи/ РСО",
		participants_count: 1000,
	},
	{
		id: 92,
		title: "II Всероссийский слет трудовых отрядов подростков",
		start_date: "2025-09-05",
		end_date: "2025-09-07",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "Агентство по делам молодежи/ РСО",
		participants_count: 1000,
	},
	{
		id: 93,
		title: "Пермский марафон",
		start_date: "2025-09-06",
		end_date: "2025-09-07",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "Администрация города Перми",
		participants_count: 10000,
	},
	{
		id: 94,
		title: "Международный фестиваль электронной музыки и визуального искусства «EFEST»",
		start_date: "2025-09-06",
		end_date: "2025-09-06",
		coordinate_one: 57.974866,
		coordinate_two: 56.159644,
		direction: "Досуг, оздоровление, вовлечение молодежи в социальный туризм",
		executor: "Министерство культуры ПК",
		participants_count: 4000,
	},
	{
		id: 95,
		title: 'Большое путешествие "Квест по объектам для молодежи "Первопроходец" (для первокурсников и иностранных студентов)',
		start_date: "2025-09-07",
		end_date: "2025-09-14",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Досуг, оздоровление, вовлечение молодежи в социальный туризм",
		executor: "Пермский филиал ВШЭ",
		participants_count: 1500,
	},
	{
		id: 96,
		title: "Кинофестиваль «Лампа»",
		start_date: "2025-09-12",
		end_date: "2025-09-14",
		direction: "Создание и распространение произведений",
		executor: "Министерство культуры ПК",
		participants_count: 3000,
	},
	{
		id: 97,
		title: "Краевой молодежный форум «Пермский период»",
		start_date: "2025-09-13",
		end_date: "2025-09-13",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Новые знания",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 5000,
	},
	{
		id: 98,
		title: "Открытие интерактивного пространства РСО Со.Здание",
		start_date: "2025-09-13",
		end_date: "2025-09-13",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "РСО",
		participants_count: 500,
	},
	{
		id: 99,
		title: "Всероссийский день бега «Кросс нации»",
		start_date: "2025-09-13",
		end_date: "2025-09-14",
		coordinate_one: 57.99669,
		coordinate_two: 56.320265,
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "Министерство физической культуры и спорта ПК",
		participants_count: 2000,
	},
	{
		id: 100,
		title: "Полуфинал Первой лиги КВН",
		start_date: "2025-09-29",
		end_date: "2025-09-30",
		coordinate_one: 57.990846,
		coordinate_two: 56.250318,
		direction: "Выявление и поддержка талантов",
		executor: "Агентство по делам молодежи ПК",
		participants_count: 8000,
	},
	{
		id: 101,
		title: "Краевой медиаслет",
		start_date: "2025-09-01",
		end_date: "2025-10-01",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Выявление и поддержка талантов",
		executor: "Движение Первых",
		participants_count: 250,
	},
	{
		id: 102,
		title: "Краевой медиаслет",
		start_date: "2025-09-01",
		end_date: "2025-10-01",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Выявление и поддержка талантов",
		executor: "Движение Первых",
		participants_count: 250,
	},
	{
		id: 103,
		title: "Конкурс профессионального мастерства «ТрудКрут»",
		start_date: "2025-09-01",
		end_date: "2025-10-01",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "РСО",
		participants_count: 200,
	},
	{
		id: 104,
		title: "Конкурс профессионального мастерства «ТрудКрут»",
		start_date: "2025-09-01",
		end_date: "2025-10-01",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "РСО",
		participants_count: 200,
	},
	{
		id: 105,
		title: "Межрегиональный студенческий фестиваль по фиджитал спорту",
		start_date: "2025-10-04",
		end_date: "2025-10-05",
		coordinate_one: 57.972753,
		coordinate_two: 56.161027,
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "Министерство физической культуры и спорта ПК",
		participants_count: 500,
	},
	{
		id: 106,
		title: 'Выставка «Образование и карьера»/форум "Труд"',
		start_date: "2025-10-03",
		end_date: "2025-10-05",
		coordinate_one: 57.993359,
		coordinate_two: 56.216659,
		direction: "Трудоустройство и профессиональное развитие",
		executor: "Министерство образования и науки ПК",
		participants_count: 40000,
	},
	{
		id: 107,
		title: "Марафон первичных отделений",
		start_date: "2025-10-10",
		end_date: "2025-09-17",
		coordinate_one: 58.007522,
		coordinate_two: 56.198644,
		direction: "Поддержка молодежных объединений и органов молодежного самоуправления",
		executor: "Движение Первых",
		participants_count: 500,
	},
	{
		id: 108,
		title: "Марафон первичных отделений",
		start_date: "2025-10-10",
		end_date: "2025-09-17",
		coordinate_one: 57.999849,
		coordinate_two: 56.248281,
		direction: "Поддержка молодежных объединений и органов молодежного самоуправления",
		executor: "Движение Первых",
		participants_count: 500,
	},
	{
		id: 109,
		title: "Кубок Автодора – борцовский турнир",
		start_date: "2025-10-09",
		end_date: "2025-10-12",
		coordinate_one: 57.974866,
		coordinate_two: 56.159644,
		direction: "Физкультура, спорт и ЗОЖ",
		executor: "ГЧП",
		participants_count: 1000,
	},
	{
		id: 110,
		title: "XVIII Всероссийский фестиваль-форум «Виват, кадет!»",
		start_date: "2025-11-04",
		end_date: "2025-11-04",
		coordinate_one: 58.009535,
		coordinate_two: 56.224404,
		direction: "Патриотическое воспитание и духовно-нравственное воспитание молодежи",
		executor: "Администрация города Перми",
		participants_count: 1000,
	},
];

// Вспомогательные функции дат
const getToday = () => {
	const date = new Date();
	date.setHours(0, 0, 0, 0);
	return date;
};

const getTomorrow = () => {
	const date = getToday();
	date.setDate(date.getDate() + 1);
	return date;
};

const getWeekend = () => {
	const date = getToday();
	const day = date.getDay();
	const diff = date.getDate() + (day === 0 ? 6 : 6 - day);
	return {
		start: new Date(date.setDate(diff - 5)), // Суббота
		end: new Date(date.setDate(diff - 5 + 1)), // Воскресенье
	};
};

const normalizeDate = (action?: string): YandexDateTime => {
	switch (action) {
		case "today":
			return {
				year: getToday().getFullYear(),
				month: getToday().getMonth() + 1,
				day: getToday().getDate(),
			};
		case "tomorrow":
			return {
				year: getTomorrow().getFullYear(),
				month: getTomorrow().getMonth() + 1,
				day: getTomorrow().getDate(),
			};
		case "weekend":
			const weekend = getWeekend();
			return {
				datetime: weekend.start.toISOString(),
				datetime_to: weekend.end.toISOString(),
			};
		default:
			return {};
	}
};

const filterEvents = (events: Event[], dateFilter?: YandexDateTime) => {
	if (!dateFilter) return events;

	const { datetime, datetime_to } = dateFilter;
	const filterStart = datetime ? new Date(datetime) : null;
	const filterEnd = datetime_to ? new Date(datetime_to) : filterStart;

	return events.filter((event) => {
		const eventStart = new Date(event.start_date);
		const eventEnd = new Date(event.end_date);

		if (filterStart && filterEnd) {
			return (
				(eventStart >= filterStart && eventStart <= filterEnd) ||
				(eventEnd >= filterStart && eventEnd <= filterEnd)
			);
		}
		return true;
	});
};

const formatDate = (dateStr: string) => {
	const date = new Date(dateStr);
	return date.toLocaleDateString("ru-RU", {
		day: "numeric",
		month: "long",
	});
};

export async function POST(request: NextRequest) {
	try {
		const body = await request.json();
		const payload = body.request?.payload;
		const sessionState = body.state?.session || {};

		// Обработка действий из кнопок
		let dateFilter = sessionState.dateFilter;
		let offset = sessionState.offset || 0;

		if (payload?.action) {
			switch (payload.action) {
				case "show_more":
					offset += 5;
					break;
				case "today":
				case "tomorrow":
				case "weekend":
					dateFilter = normalizeDate(payload.action);
					offset = 0;
					break;
			}
		}

		// Фильтрация мероприятий
		let filteredEvents = filterEvents(data, dateFilter);

		// Пагинация
		const paginatedEvents = filteredEvents.slice(offset, offset + 5);
		const hasMore = filteredEvents.length > offset + 5;

		// Формирование ответа
		let responseText = "";
		let responseTTS = "";
		const buttons = [];

		if (paginatedEvents.length > 0) {
			responseText = `Найдено мероприятий: ${filteredEvents.length}\n`;
			responseTTS = `Я нашла ${filteredEvents.length} мероприятий. `;

			paginatedEvents.forEach((event, index) => {
				responseText += `\n${offset + index + 1}. ${event.title} (${formatDate(
					event.start_date
				)})`;
				responseTTS += `${event.title}. `;
			});

			if (hasMore) {
				buttons.push({
					title: "Показать ещё",
					payload: { action: "show_more" },
					hide: true,
				});
			}
		} else {
			responseText = "Мероприятий не найдено";
			responseTTS = responseText;
		}

		// Кнопки фильтров
		buttons.push(
			{ title: "Сегодня", payload: { action: "today" }, hide: true },
			{ title: "Завтра", payload: { action: "tomorrow" }, hide: true },
			{ title: "Выходные", payload: { action: "weekend" }, hide: true }
		);

		const response = {
			response: {
				text: responseText,
				tts: responseTTS,
				end_session: false,
				buttons,
			},
			version: body.version,
			session_state: {
				dateFilter,
				offset,
				total: filteredEvents.length,
			},
		};

		return NextResponse.json(response, { status: 200 });
	} catch (error) {
		console.error("Error:", error);
		return NextResponse.json(
			{
				response: {
					text: "Произошла ошибка",
					tts: "Извините, произошла ошибка",
					end_session: true,
				},
				version: "1.0",
			},
			{ status: 500 }
		);
	}
}
